(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const o of e.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function a(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?e.credentials="include":t.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function l(t){if(t.ep)return;t.ep=!0;const e=a(t);fetch(t.href,e)}})();console.info('"Elevator" script started successfully');const s={0:{tablesRange:["1","15"],exitCoord:[54,20]},"-1":{tablesRange:["16","41"],exitCoord:[42,15]},"-2":{tablesRange:["42","67"],exitCoord:[42,15]},"-3":{tablesRange:["68","93"],exitCoord:[42,15]},"-4":{tablesRange:["94","119"],exitCoord:[42,15]},"-5":{tablesRange:["120","145"],exitCoord:[42,15]}},c=32;WA.onInit().then(()=>{$(document).ready(function(){console.info('"Elevator" init');const r=new URL(window.location.toString()).searchParams.get("floor");class a{constructor(){this.targetFloor=null,this.targetButton=null,this.currentFloor=Number(r),this.queue=[],$(".floor-number").html(this.currentFloor),$("#tables-range-from").html(s[r].tablesRange[0]),$("#tables-range-to").html(s[r].tablesRange[1]),$(".button").on("click",this,this.enQueue),$(".button").on("mouseenter",function(){const e=$(this).text();$("#details .floor-number").html(e),$("#tables-range-from").html(s[e].tablesRange[0]),$("#tables-range-to").html(s[e].tablesRange[1])})}changeFloor(e){e!=""&&$(e).animate({opacity:1}),setTimeout(function(){$(e).animate({opacity:0},400);const o=s[this.currentFloor].exitCoord[0]*c,n=s[this.currentFloor].exitCoord[1]*c;this.currentFloor=this.targetFloor,$("#screen .floor-number").fadeOut(500,function(){$("#screen .floor-number").html(this.currentFloor).fadeIn(500),this.targetButton.removeClass("glow")}.bind(this)),setTimeout(()=>{WA.player.moveTo(o,n)},1500),this.targetFloor=null,this.targetButton.on("click",l,this.enQueue),this.checkQueue()}.bind(this),1e3)}enQueue(e){let o=e.data,n=$(this);o.queue.push(n),n.addClass("glow"),$(n).off("click"),$(n).prop("disabled",!0),WA.controls.disablePlayerControls(),WA.controls.disablePlayerProximityMeeting(),WA.room.hideLayer("elevator/closed"),WA.room.showLayer("elevator/open"),WA.room.showLayer("elevator-above/open"),o.checkQueue()}checkQueue(){this.queue.length&&this.targetFloor===null&&(this.targetButton=this.queue.splice(0,1)[0],this.targetFloor=Number(this.targetButton.text()),WA.player.state.targetFloor=this.targetFloor,this.targetFloor>this.currentFloor?this.changeFloor("#up-indicator"):this.targetFloor<this.currentFloor?this.changeFloor("#down-indicator"):this.changeFloor(""))}}let l=new a})}).catch(i=>console.error(i));
